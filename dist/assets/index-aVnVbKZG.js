import{d as h,a as x,b as n,f as i,w as u,K as j,r as _,o as v,g as c,L as P,M as S,_ as D,N as O,O as E,u as w,P as N,j as $,c as q,k as z,E as B,n as V,F as T,i as y,t as A,e as G,Q as U,R as F}from"./group-user-DDy4M9gZ.js";import{_ as H,a as K,b as I}from"./group-dashboard-CaQo09Zf.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();const J={class:"min-h-screen bg-gray-100"},Q={class:"bg-gradient-to-r from-blue-600 to-blue-800 text-white"},W={class:"container mx-auto px-4 py-16"},X={class:"flex gap-4"},Y=h({__name:"Home",setup(l){return(a,e)=>{const s=_("router-link");return v(),x("div",J,[n("header",Q,[n("div",W,[e[2]||(e[2]=n("h1",{class:"text-4xl md:text-6xl font-bold mb-6"}," Voyagez ensemble en Nouvelle-CalÃ©donie ",-1)),e[3]||(e[3]=n("p",{class:"text-xl mb-8"}," Partagez vos trajets quotidiens et Ã©conomisez ensemble ",-1)),n("div",X,[i(s,{to:"/register",class:"bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition"},{default:u(()=>e[0]||(e[0]=[c(" Commencer ")])),_:1}),i(s,{to:"/search-routes",class:"border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white/10 transition"},{default:u(()=>e[1]||(e[1]=[c(" Rechercher un trajet ")])),_:1})])])]),e[4]||(e[4]=j('<section class="py-16"><div class="container mx-auto px-4"><h2 class="text-3xl font-bold text-center mb-12">Comment Ã§a marche ?</h2><div class="grid md:grid-cols-3 gap-8"><div class="text-center p-6"><div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"><i class="text-2xl text-blue-600">ğŸš—</i></div><h3 class="text-xl font-semibold mb-2">Conducteurs</h3><p>DÃ©finissez vos trajets quotidiens et gagnez des revenus supplÃ©mentaires</p></div><div class="text-center p-6"><div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"><i class="text-2xl text-blue-600">ğŸ‘¥</i></div><h3 class="text-xl font-semibold mb-2">Passagers</h3><p>Trouvez des trajets qui correspondent Ã  vos besoins et Ã©conomisez</p></div><div class="text-center p-6"><div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"><i class="text-2xl text-blue-600">ğŸ«</i></div><h3 class="text-xl font-semibold mb-2">Jetons</h3><p>Achetez des jetons pour rÃ©server vos trajets en toute simplicitÃ©</p></div></div></div></section>',1))])}}}),Z={class:"min-h-screen bg-gray-100 py-12"},ee=h({__name:"CreateRoute",setup(l){return(a,e)=>(v(),x("div",Z,e[0]||(e[0]=[j('<div class="max-w-7xl mx-auto sm:px-6 lg:px-8"><div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"><div class="p-6"><h1 class="text-2xl font-semibold text-gray-900 mb-6">CrÃ©er un Trajet</h1><div class="space-y-6"><p>Page en construction...</p></div></div></div></div>',1)])))}}),te=[{path:"/",name:"Home",component:Y},{path:"/dashboard",name:"Dashboard",component:H,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:D,meta:{requiresGuest:!0}},{path:"/register",name:"Register",component:O,meta:{requiresGuest:!0}},{path:"/profile",name:"Profile",component:E,meta:{requiresAuth:!0}},{path:"/create-route",name:"CreateRoute",component:ee,meta:{requiresAuth:!0,requiresDriver:!0}},{path:"/search-routes",name:"SearchRoutes",component:K,meta:{requiresAuth:!0}},{path:"/tokens-shop",name:"TokensShop",component:I,meta:{requiresAuth:!0}}],M=P({history:S(),routes:te});M.beforeEach(async(l,a,e)=>{const s=w(),o=l.matched.some(m=>m.meta.requiresAuth),r=l.matched.some(m=>m.meta.requiresGuest),d=l.matched.some(m=>m.meta.requiresDriver);if(l.path==="/"){s.isAuthenticated?e("/dashboard"):e("/login");return}if(o&&!s.isAuthenticated){e("/login");return}if(r&&s.isAuthenticated){e("/dashboard");return}if(d&&!s.isDriver){e("/dashboard");return}e()});const se={class:"bg-white shadow-sm"},oe={class:"container mx-auto px-4"},re={class:"flex justify-between items-center h-16"},ne={key:1,class:"relative"},ae={class:"text-sm text-gray-500"},ie={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-[100]"},le=h({__name:"NavBar",setup(l){const a=N(),e=w(),s=$(!1),o=$(!1),r=q(()=>e.isAuthenticated),d=q(()=>{var p;return((p=e.user)==null?void 0:p.name)||"Mon compte"}),m=()=>{s.value=!s.value,s.value&&(o.value=!1)},R=()=>{o.value=!o.value},b=()=>{s.value=!1,o.value=!1},L=async()=>{try{await e.logout(),b(),a.push("/login")}catch(p){console.error("Erreur lors de la dÃ©connexion:",p)}},C=p=>{const t=p.target;t.closest(".relative")||(o.value=!1),t.closest("nav")||(s.value=!1)};return z(()=>{document.addEventListener("click",C)}),B(()=>{document.removeEventListener("click",C)}),(p,t)=>{const f=_("router-link");return v(),x("nav",se,[n("div",oe,[n("div",re,[i(f,{to:"/",class:"font-bold text-xl text-blue-600"},{default:u(()=>t[4]||(t[4]=[c(" DailyRouteNC ")])),_:1}),n("button",{onClick:m,class:"md:hidden text-gray-600 hover:text-blue-600 focus:outline-none"},t[5]||(t[5]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16m-7 6h7"})],-1)])),n("div",{class:V([{hidden:!s.value,block:s.value},"absolute md:static top-16 left-0 w-full md:w-auto bg-white md:bg-transparent shadow-md md:shadow-none z-10 md:flex md:items-center space-y-4 md:space-y-0 md:space-x-4"])},[i(f,{to:"/search-routes",class:"block text-gray-600 hover:text-blue-600 px-4 py-2 md:px-3 md:py-2",onClick:t[0]||(t[0]=g=>s.value=!1)},{default:u(()=>t[6]||(t[6]=[c(" Rechercher ")])),_:1}),i(f,{to:"/tokens-shop",class:"block text-gray-600 hover:text-blue-600 px-4 py-2 md:px-3 md:py-2",onClick:t[1]||(t[1]=g=>s.value=!1)},{default:u(()=>t[7]||(t[7]=[c(" Acheter des jetons ")])),_:1}),r.value?y("",!0):(v(),x(T,{key:0},[i(f,{to:"/login",class:"block text-gray-600 hover:text-blue-600 px-4 py-2 md:px-3 md:py-2",onClick:t[2]||(t[2]=g=>s.value=!1)},{default:u(()=>t[8]||(t[8]=[c(" Connexion ")])),_:1}),i(f,{to:"/register",class:"block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 md:px-3 md:py-2",onClick:t[3]||(t[3]=g=>s.value=!1)},{default:u(()=>t[9]||(t[9]=[c(" S'inscrire ")])),_:1})],64)),r.value?(v(),x("div",ne,[n("button",{onClick:R,class:"flex items-center space-x-2 text-gray-600 hover:text-blue-600 px-4 py-2 md:px-3 md:py-2"},[n("span",null,A(d.value),1),n("span",ae,"("+A(G(e).tokenBalance)+" jetons)",1),t[10]||(t[10]=n("span",{class:"text-xs"},"â–¼",-1))]),o.value?(v(),x("div",ie,[i(f,{to:"/dashboard",class:"block px-4 py-2 text-gray-700 hover:bg-gray-100",onClick:b},{default:u(()=>t[11]||(t[11]=[c(" Tableau de bord ")])),_:1}),i(f,{to:"/profile",class:"block px-4 py-2 text-gray-700 hover:bg-gray-100",onClick:b},{default:u(()=>t[12]||(t[12]=[c(" Mon profil ")])),_:1}),n("button",{onClick:L,class:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100"}," DÃ©connexion ")])):y("",!0)])):y("",!0)],2)])])])}}}),ue={class:"min-h-screen bg-gray-50"},ce=h({__name:"App",setup(l){const a=w(),e=N();return z(async()=>{try{await a.reconnect(),a.isAuthenticated&&e.currentRoute.value.path==="/"&&e.push("/dashboard")}catch(s){console.error("Erreur lors de la reconnexion:",s)}}),(s,o)=>{const r=_("router-view");return v(),x("div",ue,[i(le),i(r)])}}}),k=U(ce);k.use(F());k.use(M);k.mount("#app");
